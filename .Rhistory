devtools::load_all()
set_con()
devtools::check()
usethis::use_mit_license("Eric Ekholm")
devtools::document()
devtools::document()
devtools::check()
devtools::check()
devtools::install()
devtools::install()
devtools::install()
?purrr::as_vector
devtools::load_all()
length(fetch_fm_ids(2019))
length(fetch_fm_ids(2017))
#' Recode Ethnicity
#'
#' @param df data
#' @param eth_var ethnicity variable. Assumed to be "ethnic" as a result of db query and clean_names
#' @param hisp_var hispanic/latino variable. Assumed to be "hispanic_latino" as a result of db query and clean_names
#'
#' @return
#' @export
#'
#' @examples
recode_ethnicity <- function(df, eth_var = ethnic, hisp_var = hispanic_latino) {
df %>%
dplyr::mutate({{ eth_var }} := dplyr::case_when(
{{ hisp_var }} == "Y" ~ "Hispanic",
{{ hisp_var }} == "N" & {{ eth_var }} == "01" ~ "American Indian/Alaska Native",
{{ hisp_var }} == "N" & {{ eth_var }} == "02" ~ "Asian",
{{ hisp_var }} == "N" & {{ eth_var }} == "03" ~ "Black or African American",
{{ hisp_var }} == "N" & {{ eth_var }} == "05" ~ "White",
{{ hisp_var }} == "N" & {{ eth_var }} == "06" ~ "Hawaiian or Pacific Islander",
TRUE ~ "Two or More"
))
}
library(tidyverse)
library(janitor)
con <- set_con()
example <- odbc::dbGetQuery(con, 'SELECT * FROM [CCPS_Shared].[CCPS_Shared].[RE_Students] WHERE School_Year = 2019')
tst <- example %>% recode_ethnicity()
tst <- example %>% clean_names() %>% recode_ethnicity()
devtools::check()
library(devtools)
load_all()
check()
install()
